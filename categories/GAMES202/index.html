<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>分类: GAMES202 | Chuan 川 Charles</title><meta name="author" content="Charles Sun"><meta name="copyright" content="Charles Sun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Sun Chuan is the best boy">
<meta property="og:type" content="website">
<meta property="og:title" content="Chuan 川 Charles">
<meta property="og:url" content="https://scitbb.top/categories/GAMES202/index.html">
<meta property="og:site_name" content="Chuan 川 Charles">
<meta property="og:description" content="Sun Chuan is the best boy">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2021/12/31/A7ps1j5SnHz8giP.png">
<meta property="article:author" content="Charles Sun">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2021/12/31/A7ps1j5SnHz8giP.png"><link rel="shortcut icon" href="https://s2.loli.net/2022/01/04/1DCTS7sH3om6rXU.jpg"><link rel="canonical" href="https://scitbb.top/categories/GAMES202/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/pwa/manifest.json"/><meta name="msapplication-TileColor" content="#fff"/><link rel="apple-touch-icon" sizes="180x180" href="/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/pwa/16.png"/><link rel="mask-icon" href="/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-3145446820269348',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Charles Sun","link":"链接: ","source":"来源: Chuan 川 Charles","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '分类: GAMES202',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-09-20 19:38:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2021/12/31/A7ps1j5SnHz8giP.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 程序</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/game/2048"><i class="fa-fw fas fa-database"></i><span> 2048</span></a></li><li><a class="site-page child" href="/game/snake"><i class="fa-fw fas fa-gamepad"></i><span> 贪吃蛇</span></a></li><li><a class="site-page child" href="/game/who"><i class="fa-fw fas fa-gamepad"></i><span> 谁写报告</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('https://s2.loli.net/2022/01/22/Vm3KGDL9sdPlucn.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Chuan 川 Charles</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 程序</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/game/2048"><i class="fa-fw fas fa-database"></i><span> 2048</span></a></li><li><a class="site-page child" href="/game/snake"><i class="fa-fw fas fa-gamepad"></i><span> 贪吃蛇</span></a></li><li><a class="site-page child" href="/game/who"><i class="fa-fw fas fa-gamepad"></i><span> 谁写报告</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">GAMES202</h1></div></header><main class="layout" id="content-inner"><div class="recent-posts category_ui" id="recent-posts">  <div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/20/games202/lc10/" title="GAMES202 10 Real-time Physically-based Materials (surface models)">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 10 Real-time Physically-based Materials (surface models)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/20/games202/lc10/" title="GAMES202 10 Real-time Physically-based Materials (surface models)">GAMES202 10 Real-time Physically-based Materials (surface models)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-20T12:07:04.000Z" title="发表于 2022-02-20 20:07:04">2022-02-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Lecture 10 Real-time Physically-based Materials (surface models)PBR and PBR Materials 基于物理渲染的材质PBR = Physically-Based Rendering 基于物理的渲染

任何渲染都可以是基于物理
材质、光照、相机、光线传播等等
不只是限制在材质范围内，但是指的往往是材质

在RTR中的PBR材质

RTR中使用的材质要远少于在offline中的材质
RTR中说是基于物理的，但实际上并不是基于物理
分两类，基本上和离线渲染差不多，但是更多着眼于技巧来提升速度
表面材质（微表面模型、迪士尼原则BRDFs Hyperion）
对体积（非表面模型）来说，头发、云、皮肤等，大多都是着眼于快速和近似的方法实现单散射和多次散射



这里复习了一下材质的BRDF，这里面包含：

菲涅尔项
NDF 法线分布函数，有很多类
Beckmann NDF 形式上很像高斯正态分布，各向同性的结果（也能异性），其中 $\alpha$表示粗糙程度，$\theta_h$表示入射与出射角的半矢量h与法线的夹角。

G ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/02/11/games202/lc9/" title="GAMES202 9 Real-time Global Illumination 3 (screen space cont.)">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 9 Real-time Global Illumination 3 (screen space cont.)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/11/games202/lc9/" title="GAMES202 9 Real-time Global Illumination 3 (screen space cont.)">GAMES202 9 Real-time Global Illumination 3 (screen space cont.)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-11T12:52:12.000Z" title="发表于 2022-02-11 20:52:12">2022-02-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Screen Space Directional Occlusion (SSDO)What is SSDO?

SSAO加强版，考虑了间接光照

Key Idea

和Path Tracing很像
在shading point，随即发射射线，如果没有照射到障碍物，就是直接光照（AO认为是间接光照）
如果照射到障碍物，就是间接光照（AO认为是没有光照） 

 实际使用：

从shading point出射一个半球，选一系列采样点。
用采样点从camera的可见性来近似为从p的可见性
如果采样点被挡住，就是算间接光照；否则取直接光照

 问题：

只能应对小范围的GI，不能得到远距离的间接光照
从screen space研究，肯定会丢失相关信息

Screen Space Reflection (SSR)What is SSR?

实时渲染中的一种引入全局光照的方法
使用了光线追踪
仍在Screen Space中研究问题

怎么做？

Shade Sence + Nromal Vector + Depth -&gt; SSR

先求交点：intersection

使用Linear Ray ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/03/games202/lc8/" title="GAMES202 8 Real-time Global Illumination 2 (screen space)">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 8 Real-time Global Illumination 2 (screen space)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/03/games202/lc8/" title="GAMES202 8 Real-time Global Illumination 2 (screen space)">GAMES202 8 Real-time Global Illumination 2 (screen space)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-03T07:19:01.000Z" title="发表于 2022-02-03 15:19:01">2022-02-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Lecture 8 Real-time Global Illumination 2 (screen space)Light Propagation Volumes (LPV)Key Problem 主要问题

要实现任何一个Shading Point的间接光照，要先知道这一个点的Radiance

Key Idea 主要思路

在一个直线上传播的Radiance（单位立体角单位面积接收到的能量）是一个不变的量。

Key Solution 主要方法

用一个3D网格，作为传播介质，来传播从物体表面到任何其他地方的直接照射的radiance。

Step 步骤

首先生成一系列点，就是被直接光照照射到的点
用RSM就足够了，但是还是存在计算量的问题


将这些虚拟光源的点集合“注入”到格子（Radiance Volumn）里面
先将场景预处理分成一个个的格子
对每一个格子，计算相邻的source light
将直接光照的分布加起来
把得到的次级光照分布使用前两阶（4terms）SH进行压缩


用Volumn Radiance 进行光线传播计算
对于每个格子，收集6个方向的radianc ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/02/03/games202/lc7/" title="GAMES202 7 Real-time Global Illumination (in 3D)">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 7 Real-time Global Illumination (in 3D)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/03/games202/lc7/" title="GAMES202 7 Real-time Global Illumination (in 3D)">GAMES202 7 Real-time Global Illumination (in 3D)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-03T07:17:43.000Z" title="发表于 2022-02-03 15:17:43">2022-02-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Wavelet 小波 2D Harr Wavelet也是一套基函数。不同函数的定义域也有所不同。小波的压缩方式和SH等其他不同，他的基函数系数有的很接近0，就可以直接当作0作为展开方式，并且可以保留全频率。这时候用的多是Cube Map。

优点：小波变换可以保留高频信息，属于全频滤波，比起只保留低频信号的SH更清晰，看起来效果很好。
缺点：不易进行旋转变换

Global Illumination 实时渲染中的全局光照直接光照好做，间接光照麻烦。每个直接光照的点，都应该作为间接光照的次级光源。
Reflective Shadow Map (RSM)

把每一个像素都作为一个次级光源
把Rendering Equation的 $d\omega$ 变换为 $dA$
(看不懂了，明天再看吧)
相比于SM存Depth，多存了世界坐标、法线、Flux。适合用于在手电筒的场景下

优点

易实现

缺点

运算量和直接光源呈现线性增长
不会判断间接光照的可见性，会有所不真实
有许多数学上的约等或者说假设
采样率和质量上的Trade off

</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/02/games202/lc6/" title="GAMES202 6 Real-time Enviroment Mapping 2">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 6 Real-time Enviroment Mapping 2"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/02/games202/lc6/" title="GAMES202 6 Real-time Enviroment Mapping 2">GAMES202 6 Real-time Enviroment Mapping 2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-02T10:50:46.000Z" title="发表于 2022-02-02 18:50:46">2022-02-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Background Knowledges 一些理解：Product-integral=滤波=卷积=加权平均：

卷积 $\int_{\Omega}f(x)g(x)dx$
滤波 考虑傅里叶变换，先乘积再积分和频域上的滤波结果相同
加权平均，把 $f(x)$ 看成权重函数， $g(x)$ 看成被积函数

Fourier Transfer 傅里叶变换：

低频信号：分布在频域图中间，表示的是模糊
高频信号：分布在周围，表示的更多是图像的边界

Basis Function 基函数：

可以类比于线性空间的标准正交基。傅里叶级数的每个项都是标准正交基
可以用一套基函数的线性组合来表达该函数空间中的任何函数，比如说三角函数代表的傅里叶展开，以及幂级数代表的泰勒展开。

Real Time Environment Lighting (&amp; global illumination)Spherical Harmonics 球面谐波函数（SH）What 是什么：

一系列 定义在球面上的 二维 函数 $B_i(\omega)$
另外一个理解：一维情况下的傅里叶函数
长得和电子云波函数一样卧槽，每 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/01/31/games202/lc5/" title="GAMES202 5 Real-time Enviroment Mapping">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 5 Real-time Enviroment Mapping"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/31/games202/lc5/" title="GAMES202 5 Real-time Enviroment Mapping">GAMES202 5 Real-time Enviroment Mapping</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-31T07:32:12.000Z" title="发表于 2022-01-31 15:32:12">2022-01-31</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Distance Field Soft Shadow (DFSS)先复习了一下GAMES101的Distance Function在几何1里面讲的

sdf有向距离场

Distance Field的运用
Ray marching (sphere tracing) to perform ray-SDF intersection


通过sdf给出的“安全距离”，


Use SDF to determine the (approx.) percentage of occlusion


a “safe” angle seen from the eye 从安全距离得到安全角度（最小的那个）
安全角度越小，阴影就越黑


怎么算安全角：


不用 $arcsin(\frac{SDF(p)}{|p-o|})$ 而是用 $min{\frac{k\cdot SDF(p)}{|p-o|},1.0}$

优点：

快（但是生成也需要时间）
高质量

缺点：

需要预计算
需要存储
会有artifact

Shading from Environment Lighting 环境光照技术：Image-B ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/01/30/games202/lc4/" title="GAMES202 4 Real-Time Shadows 2">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 4 Real-Time Shadows 2"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/30/games202/lc4/" title="GAMES202 4 Real-Time Shadows 2">GAMES202 4 Real-Time Shadows 2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-30T08:52:25.000Z" title="发表于 2022-01-30 16:52:25">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">A deeper look at pcffilter/convolution:
 $[\omega*f](p)=\sum_{q\in \mathcal{N}}^{}\omega(p,q)f(q)$
in PCSS: 实际上也是一个卷积运算来求得Visibility函数
 $V(x)=\sum_{q\in \mathcal{N} (p)}^{}\omega(p,q)\cdot \chi^+[D_{SM}(q)-D_{sence}(x)]$
PCF是在图像（模型几何结构的二维投影）层面处理，而非是先shadow map之后再在shadow map上面做模糊。
Revisiting PCSSPCSS的完整算法

Step 1 Blocker Search 遮挡物搜索，在一个确切距离中得到平均遮挡深度。
Step 2 Penumbra Estimate 半影估计，用平均遮挡深度来决定filter size
Step 3 Percentage Closer Filter 用产生的Adaptive filter size进行PCF

哪一步更慢？

第一步和第三步，每次都要看遮挡物，PCF也会比较 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/01/27/games202/lc3/" title="GAMES202 3 Real-Time Shadows 1">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 3 Real-Time Shadows 1"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/27/games202/lc3/" title="GAMES202 3 Real-Time Shadows 1">GAMES202 3 Real-Time Shadows 1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-27T12:25:57.000Z" title="发表于 2022-01-27 20:25:57">2022-01-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Shadow Mapping 生成硬阴影2 pass Algorithm 渲染两边的算法

第一遍，从光源出发，生成sm（Shadow Map）
第二遍，从相机出发，使用sm检测其是否在阴影里

一个完全在图像中的算法:

优点：一旦图像已经生成，不需要知道图像的几何场景
缺点：会产生自遮挡现象，以及锯齿
自遮挡（self occlusion）：Shadow Map中的像素会把一个平面采样分成一块一块的阶梯状深度，但是在从相机出发而言，就会认为，地板之间会发生相互遮挡
处理：添加一个可变的Bias，如果不超出这个bias，就忽略遮挡的影响。（但也相应引入detached shadow不接触的阴影）
另一种方法：second-depth shadow mapping，记录次小深度，用中点深度进行遮挡比较。但是没人用，因为模型不能是全平面，
锯齿（Alias）




实时渲染不相信复杂度（哈哈哈哈）（只相信时间，RTR中常数也十分重要）

Approximation in RTR实时渲染中的一个重要的约等于，主要是把积分中的两个函数拆开来：

$\int_{\Omega}f(x)g(x) ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/01/25/games202/lc1_2/" title="GAMES202 1&amp;2 Overview &amp; Recap of CG Basis">     <img class="post_bg" src="https://s2.loli.net/2021/12/31/Kxw7frsdp842TkU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES202 1&amp;2 Overview &amp; Recap of CG Basis"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/25/games202/lc1_2/" title="GAMES202 1&amp;2 Overview &amp; Recap of CG Basis">GAMES202 1&amp;2 Overview &amp; Recap of CG Basis</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-25T11:46:17.000Z" title="发表于 2022-01-25 19:46:17">2022-01-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GAMES202/">GAMES202</a></span></div><div class="content">Lecture 1&amp;2 Overview &amp; Recap of CG BasisContents
Shadows
Global Illum
Physically-based Shading
Real-time Ray Tracing

Graphics Pipeline 渲染管线 复习OpenGL:
一系列通过CPU调用GPU的API
语言不重要
跨平台
替代品：DirectX，Vulkan


缺点：
版本比较碎片化
C style, 使用不是很简单
（之前）不好Debug


如何理解：
和101里面的光栅化一一对应


放置/摆放物体，视图变换啥的，GL有矩阵相乘的API 
VBO 存储模型的向量、坐标、纹理坐标
之前的obj文件


使用一个画架easel（GL里面的framebuffer）可以渲染多张图
还有一种是直接渲染到屏幕（垂直同步），但是容易造成画面撕裂。使用双/三重缓冲避免
目前只需要用到vertex shader和fragment shader

大致渲染过程，每一次pass
指定物体、相机、MVP等等
指定framebuffer、输入输出text ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2021/12/31/A7ps1j5SnHz8giP.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Charles Sun</div><div class="author-info__description">Sun Chuan is the best boy</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/sankhyan24"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/sankhyan24" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:sunchuan24@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">Welcome to my Blog!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/11/srtp/2022-9-11-body-relight-Paper-(cont.)/" title="读 Relighting Humans 论文"><img src="https://cdn.jsdelivr.net/gh/SankHyan24/image1/img/202209201937868.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="读 Relighting Humans 论文"/></a><div class="content"><a class="title" href="/2022/09/11/srtp/2022-9-11-body-relight-Paper-(cont.)/" title="读 Relighting Humans 论文">读 Relighting Humans 论文</a><time datetime="2022-09-10T16:00:00.000Z" title="发表于 2022-09-11 00:00:00">2022-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/13/computerorgnize/Chapter8/" title="计算机组成 6"><img src="https://cdn.jsdelivr.net/gh/SankHyan24/image1/img/202209122332612.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成 6"/></a><div class="content"><a class="title" href="/2022/06/13/computerorgnize/Chapter8/" title="计算机组成 6">计算机组成 6</a><time datetime="2022-06-13T13:45:18.000Z" title="发表于 2022-06-13 21:45:18">2022-06-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/11/computerorgnize/Chapter5/" title="计算机组成 5"><img src="https://cdn.jsdelivr.net/gh/SankHyan24/image1/img/202209122332612.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成 5"/></a><div class="content"><a class="title" href="/2022/06/11/computerorgnize/Chapter5/" title="计算机组成 5">计算机组成 5</a><time datetime="2022-06-11T13:45:18.000Z" title="发表于 2022-06-11 21:45:18">2022-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/10/computerorgnize/Chapter4/" title="计算机组成 4"><img src="https://cdn.jsdelivr.net/gh/SankHyan24/image1/img/202209122332612.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成 4"/></a><div class="content"><a class="title" href="/2022/06/10/computerorgnize/Chapter4/" title="计算机组成 4">计算机组成 4</a><time datetime="2022-06-10T13:45:18.000Z" title="发表于 2022-06-10 21:45:18">2022-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/09/computerorgnize/Chapter2/" title="计算机组成 2"><img src="https://cdn.jsdelivr.net/gh/SankHyan24/image1/img/202209122332612.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成 2"/></a><div class="content"><a class="title" href="/2022/06/09/computerorgnize/Chapter2/" title="计算机组成 2">计算机组成 2</a><time datetime="2022-06-09T13:45:18.000Z" title="发表于 2022-06-09 21:45:18">2022-06-09</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Fundamentals-of-Computer-Graphics/"><span class="card-category-list-name">Fundamentals of Computer Graphics</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/GAMES101/"><span class="card-category-list-name">GAMES101</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/GAMES202/"><span class="card-category-list-name">GAMES202</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Math/"><span class="card-category-list-name">Math</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SRTP/"><span class="card-category-list-name">SRTP</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Unreal-Engine/"><span class="card-category-list-name">Unreal Engine</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%B8%93%E4%B8%9A%E8%AF%BE/"><span class="card-category-list-name">专业课</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E9%80%9A%E8%AF%86%E5%9F%BA%E7%A1%80%E8%AF%BE/"><span class="card-category-list-name">通识基础课</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Game/" style="font-size: 1.1em; color: #999">Game</a> <a href="/tags/Geometry/" style="font-size: 1.23em; color: #999ea6">Geometry</a> <a href="/tags/Graphics/" style="font-size: 1.5em; color: #99a9bf">Graphics</a> <a href="/tags/MSAA/" style="font-size: 1.1em; color: #999">MSAA</a> <a href="/tags/OpenGL/" style="font-size: 1.1em; color: #999">OpenGL</a> <a href="/tags/PCSS/" style="font-size: 1.17em; color: #999c9f">PCSS</a> <a href="/tags/Physics/" style="font-size: 1.17em; color: #999c9f">Physics</a> <a href="/tags/Precompute/" style="font-size: 1.17em; color: #999c9f">Precompute</a> <a href="/tags/Radiometry/" style="font-size: 1.1em; color: #999">Radiometry</a> <a href="/tags/Ray-Tracing/" style="font-size: 1.37em; color: #99a4b2">Ray Tracing</a> <a href="/tags/Shading/" style="font-size: 1.43em; color: #99a6b9">Shading</a> <a href="/tags/Stochastic-Process/" style="font-size: 1.17em; color: #999c9f">Stochastic Process</a> <a href="/tags/Surface/" style="font-size: 1.3em; color: #99a1ac">Surface</a> <a href="/tags/VR/" style="font-size: 1.1em; color: #999">VR</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/" style="font-size: 1.43em; color: #99a6b9">计算机组成</a> <a href="/tags/%E9%BE%A5%E6%AC%A1%E5%85%83/" style="font-size: 1.1em; color: #999">龥次元</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">23</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/1122/06/"><span class="card-archive-list-date">六月 1122</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/1022/08/"><span class="card-archive-list-date">八月 1022</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">44</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-12-31T15:59:59.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-09-20T11:38:52.522Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2021/12/31/rYXLato2Nz1H5GK.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Charles Sun</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my blog!<br />
<img src="http://static.dy208.cn/o_1dfilp8ruo521thr1hvf18ji17soa.png">
<a href="http://www.beian.miit.gov.cn/"  target="_blank">辽ICP备2022000878号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: '[object Object]',
      })
      false && mermaid.init()
    })
  }
}</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>((window.gitter = {}).chat = {}).options = {
  room: 'Charles_Sun/community',
};

if (false) {
  function chatBtnHide () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'none'
  }

  function chatBtnShow () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'block'
  }
}
</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>